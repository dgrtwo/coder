<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classification of Items into Categories Based on External Code Data • coder</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Classification of Items into Categories Based on External Code Data">
<meta property="og:description" content="Identify items and classify them into categories by coded data.
  Functionality of the package relies on three central objects.
  1) A data frame ('data.table') with item data (for example patients) to classify.
  2) A data frame ('data.table') with codes (for example 'ICD' 10-codes) for each item
  valid at distinct time points.
  3) A classification scheme (a 'classcodes' object) defining the
  classification based on regular expressions.
  It is easy to introduce new classification schemes to use with arbitrary
  code data and some default 'classcodes' objects are included in the package.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">coder</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/benchmark.html">Benchmarking</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/eribul/coder">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    

<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="coder" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#coder" class="anchor"></a>coder</h1></div>
<p>The goal of coder is to classify items from one dataset, using code data from a secondary source. It was first developed for medical comorbidity data based on hospital visits recorded in a national patient register. Medical conditions were registered using standardized codes (ICD-10) and individual codes were summarized by weighting all individual comorbidities for each patient (the Charlson and Elixhauser comorbidity indices). Only hospital visits recorded within a specified time frame, compared to individual reference dates from the primary data source, were recognized as relevant.</p>
<p>The large data sets, as well as the complexity of the classification schemes make those calculations time consuming. A naïve approach using bare code comparisons and for-loops in R, took approximately 16 hours to run on a laptop computer with 16 GB of RAM. We were then able to reformulate the coding schemes using regular expressions and we optimized our package using the data.table package. The classification time were then reduced to a number of seconds. We also compared the coder package to two packages on CRAN with similar scoop, icd and comorbidities.icd10. Our package was considerably faster than those.</p>
<p>The package does not only include classification schemes for comorbidity data. It incorporates a general framework for any case where items can be classified using standardized codes. It might therefore be relevant for many tasks involving data management in official statistics using big data.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of coder from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"coder"</span>)</a></code></pre></div>
<p>And the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"eribul/coder"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This is a basic example how to categorize patients by Elixhauser comorbidity:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(coder)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co"># A group of patients ...</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">head</span>(ex_people)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;                 name    surgery</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; 1    Beaver, Tristin 2016-09-11</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 2  Maestas, Lilibeth 2016-10-23</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 3        Jung, Derek 2017-02-20</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; 4     Hayes, Kylihah 2016-12-31</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; 5     el-Riaz, Aadam 2016-04-19</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; 6 Sanchez, Dominique 2017-02-25</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co"># ... with a group of comorbidies ...</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="kw">head</span>(ex_icd10)</a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;                id  code_date   code  hdia</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; 1: Abzari, Joseph 2016-04-15  C430C FALSE</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; 2: Abzari, Joseph 2016-05-02  L818A FALSE</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; 3: Abzari, Joseph 2016-06-06   O630 FALSE</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; 4: Abzari, Joseph 2016-09-01   P558 FALSE</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt; 5: Abzari, Joseph 2016-10-02 UA3290 FALSE</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; 6: Abzari, Joseph 2016-12-18  S6260 FALSE</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co"># ... can be categorized by the Elixhauser commorbidity index:</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24">df &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="st">  </span><span class="kw"><a href="reference/add.html">categorize</a></span>(</a>
<a class="sourceLine" id="cb3-26" data-line-number="26">    ex_people, </a>
<a class="sourceLine" id="cb3-27" data-line-number="27">    ex_icd10, </a>
<a class="sourceLine" id="cb3-28" data-line-number="28">    <span class="st">"elix_icd10"</span>, </a>
<a class="sourceLine" id="cb3-29" data-line-number="29">    <span class="dt">id =</span> <span class="st">"name"</span>, </a>
<a class="sourceLine" id="cb3-30" data-line-number="30">    <span class="dt">date =</span> <span class="st">"surgery"</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31">  )</a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; Warning in codify(x = to, from = from, id = id, date = date, days = days):</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; Date column ignored since days = NULL!</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; index calculated as number of relevant categories</span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="co"># Tabulate the Elixhauser index</span></a>
<a class="sourceLine" id="cb3-37" data-line-number="37"><span class="kw">table</span>(df<span class="op">$</span>index)</a>
<a class="sourceLine" id="cb3-38" data-line-number="38"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-39" data-line-number="39"><span class="co">#&gt;  0  1  2  3 </span></a>
<a class="sourceLine" id="cb3-40" data-line-number="40"><span class="co">#&gt; 55 37  4  3</span></a>
<a class="sourceLine" id="cb3-41" data-line-number="41"></a>
<a class="sourceLine" id="cb3-42" data-line-number="42"><span class="co"># Count how many patients have each comorbidity identified by Elixhauser</span></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"><span class="kw">colSums</span>(df[,<span class="dv">3</span><span class="op">:</span><span class="dv">32</span>], <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-44" data-line-number="44"><span class="co">#&gt;       congestive heart failure            cardiac arrhythmias </span></a>
<a class="sourceLine" id="cb3-45" data-line-number="45"><span class="co">#&gt;                              2                              1 </span></a>
<a class="sourceLine" id="cb3-46" data-line-number="46"><span class="co">#&gt;               valvular disease pulmonary circulation disorder </span></a>
<a class="sourceLine" id="cb3-47" data-line-number="47"><span class="co">#&gt;                              2                              0 </span></a>
<a class="sourceLine" id="cb3-48" data-line-number="48"><span class="co">#&gt;   peripheral vascular disorder     hypertension uncomplicated </span></a>
<a class="sourceLine" id="cb3-49" data-line-number="49"><span class="co">#&gt;                              2                              0 </span></a>
<a class="sourceLine" id="cb3-50" data-line-number="50"><span class="co">#&gt;       hypertension complicated                      paralysis </span></a>
<a class="sourceLine" id="cb3-51" data-line-number="51"><span class="co">#&gt;                              2                              3 </span></a>
<a class="sourceLine" id="cb3-52" data-line-number="52"><span class="co">#&gt;   other neurological disorders      chronic pulmonary disease </span></a>
<a class="sourceLine" id="cb3-53" data-line-number="53"><span class="co">#&gt;                              3                              2 </span></a>
<a class="sourceLine" id="cb3-54" data-line-number="54"><span class="co">#&gt;         diabetes uncomplicated           diabetes complicated </span></a>
<a class="sourceLine" id="cb3-55" data-line-number="55"><span class="co">#&gt;                              0                              3 </span></a>
<a class="sourceLine" id="cb3-56" data-line-number="56"><span class="co">#&gt;                 hypothyroidism                  renal failure </span></a>
<a class="sourceLine" id="cb3-57" data-line-number="57"><span class="co">#&gt;                              1                              1 </span></a>
<a class="sourceLine" id="cb3-58" data-line-number="58"><span class="co">#&gt;                  liver disease           peptic ulcer disease </span></a>
<a class="sourceLine" id="cb3-59" data-line-number="59"><span class="co">#&gt;                              0                              0 </span></a>
<a class="sourceLine" id="cb3-60" data-line-number="60"><span class="co">#&gt;                       AIDS/HIV                       lymphoma </span></a>
<a class="sourceLine" id="cb3-61" data-line-number="61"><span class="co">#&gt;                              0                              4 </span></a>
<a class="sourceLine" id="cb3-62" data-line-number="62"><span class="co">#&gt;              metastatic cancer                    solid tumor </span></a>
<a class="sourceLine" id="cb3-63" data-line-number="63"><span class="co">#&gt;                              2                             11 </span></a>
<a class="sourceLine" id="cb3-64" data-line-number="64"><span class="co">#&gt;           rheumatoid arthritis                   coagulopathy </span></a>
<a class="sourceLine" id="cb3-65" data-line-number="65"><span class="co">#&gt;                              6                              0 </span></a>
<a class="sourceLine" id="cb3-66" data-line-number="66"><span class="co">#&gt;                        obesity                    weight loss </span></a>
<a class="sourceLine" id="cb3-67" data-line-number="67"><span class="co">#&gt;                              0                              2 </span></a>
<a class="sourceLine" id="cb3-68" data-line-number="68"><span class="co">#&gt;    fluid electrolyte disorders              blood loss anemia </span></a>
<a class="sourceLine" id="cb3-69" data-line-number="69"><span class="co">#&gt;                              2                              0 </span></a>
<a class="sourceLine" id="cb3-70" data-line-number="70"><span class="co">#&gt;              deficiency anemia                  alcohol abuse </span></a>
<a class="sourceLine" id="cb3-71" data-line-number="71"><span class="co">#&gt;                              1                              1 </span></a>
<a class="sourceLine" id="cb3-72" data-line-number="72"><span class="co">#&gt;                     drug abuse                      psychoses </span></a>
<a class="sourceLine" id="cb3-73" data-line-number="73"><span class="co">#&gt;                              1                              2</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/eribul/coder">https://​github.com/​eribul/​coder</a>
</li>
<li>Report a bug at <br><a href="https://github.com/eribul/coder/issues">https://​github.com/​eribul/​coder/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.org/eribul">Erik Bulow</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9973-456X" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/eribul/coder"><img src="https://travis-ci.org/eribul/coder.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/eribul/coder"><img src="https://ci.appveyor.com/api/projects/status/github/eribul/coder?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/gh/eribul/coder"><img src="https://codecov.io/gh/eribul/coder/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://github.org/eribul">Erik Bulow</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
