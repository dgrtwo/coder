<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classcodes objects • coder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Classcodes objects">
<meta property="og:description" content="coder">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">coder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.11.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/coder.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/classcodes.html">Classcodes objects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/eribul/coder/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="classcodes_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Classcodes objects</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/eribul/coder/blob/master/vignettes/classcodes.Rmd"><code>vignettes/classcodes.Rmd</code></a></small>
      <div class="hidden name"><code>classcodes.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">coder</span>)</pre></body></html></div>
<p>Classification is implemented by classcodes objects with regular expressions identifying different groups. Default classcodes object included in the package are:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="../reference/all_classcodes.html">all_classcodes</a></span>()$<span class="no">classcodes</span>
<span class="co">#&gt; [1] "charlson"      "cps"           "elixhauser"    "hip_ae"       </span>
<span class="co">#&gt; [5] "hip_ae_hailer" "knee_ae"       "rxriskv"</span></pre></body></html></div>
<p>We will have a closer look at one of those objects, <code>charlson</code>, to exemplify its content. The object is basically a data frame …</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">charlson</span>, <span class="fl">3</span>) <span class="co"># Display first 3 lines</span>
)</pre></body></html></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="29%">
<col width="13%">
<col width="5%">
<col width="12%">
<col width="9%">
<col width="3%">
<col width="4%">
<col width="2%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="3%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="left">group</th>
<th align="left">description</th>
<th align="left">regex_icd10</th>
<th align="left">regex_icd9cm_deyo</th>
<th align="left">regex_icd9cm_enhanced</th>
<th align="left">regex_icd10_rcs</th>
<th align="left">regex_icd8_brusselaers</th>
<th align="left">regex_icd9_brusselaers</th>
<th align="right">index_charlson</th>
<th align="right">index_deyo_ramano</th>
<th align="right">index_dhoore</th>
<th align="right">index_ghali</th>
<th align="right">index_quan_original</th>
<th align="right">index_quan_updated</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">myocardial infarction</td>
<td align="left">Acute myocardial infarction. Old myocardial infarction.</td>
<td align="left">I2([12]|52)</td>
<td align="left">41[02]</td>
<td align="left">41[02]</td>
<td align="left">I2([1-3]|52)</td>
<td align="left">41[0-2]</td>
<td align="left">41[02]</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">congestive heart failure</td>
<td align="left">Heart failure.</td>
<td align="left">I(099|1(10|3[02])|255|4(2[05-9]|3)|50)|P290</td>
<td align="left">428</td>
<td align="left">39891|4(0(2([01]1|91)|4([019][13]))|2(5[4-9]|8))</td>
<td align="left">I(1[13]|255|4[23]|5(0|17))</td>
<td align="left">4270|428</td>
<td align="left">4(02|2[589])</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">peripheral vascular disease</td>
<td align="left">Peripheral vascular disease, incl. intermittent claudication. Aortic aneurysm. Gangrene. Blood vessel replaced by prosthesis. Resection and replacement of lower limb arteries.</td>
<td align="left">I7([01]|3[189]|71|9[02])|K55[189]|Z95[89]</td>
<td align="left">44(39|1)|7854|V434</td>
<td align="left">0930|4(373|4[01]|3[1-9]|471)|557[19]|V434</td>
<td align="left">(I7([0-3]|7[01]))|K55[189]|R02|Z95[89]</td>
<td align="left">44[0-5]</td>
<td align="left">44[0-7]|785E|V43D</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>… with some additional attributes:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span>(<span class="no">charlson</span>)
<span class="co">#&gt; $names</span>
<span class="co">#&gt;  [1] "group"                  "description"            "regex_icd10"           </span>
<span class="co">#&gt;  [4] "regex_icd9cm_deyo"      "regex_icd9cm_enhanced"  "regex_icd10_rcs"       </span>
<span class="co">#&gt;  [7] "regex_icd8_brusselaers" "regex_icd9_brusselaers" "index_charlson"        </span>
<span class="co">#&gt; [10] "index_deyo_ramano"      "index_dhoore"           "index_ghali"           </span>
<span class="co">#&gt; [13] "index_quan_original"    "index_quan_updated"    </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $row.names</span>
<span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $class</span>
<span class="co">#&gt; [1] "classcodes" "tbl_df"     "tbl"        "data.frame"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $regexprs</span>
<span class="co">#&gt; [1] "regex_icd10"            "regex_icd9cm_deyo"      "regex_icd9cm_enhanced" </span>
<span class="co">#&gt; [4] "regex_icd10_rcs"        "regex_icd8_brusselaers" "regex_icd9_brusselaers"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $indices</span>
<span class="co">#&gt; [1] "index_charlson"      "index_deyo_ramano"   "index_dhoore"       </span>
<span class="co">#&gt; [4] "index_ghali"         "index_quan_original" "index_quan_updated"</span></pre></body></html></div>
<div id="columns" class="section level1">
<h1 class="hasAnchor">
<a href="#columns" class="anchor"></a>Columns</h1>
<ul>
<li>The “group” column contains short descriptive names of all groups to classify by. Those names might contain spaces and other special characters which might be transformed when used (argument <code>tech_names</code> in <code>set_classcodes</code>).</li>
<li>Column “description” (optional) provides additional details of each group.</li>
<li>All columns with names prefixed by <code>regex_</code> (also found by <code><a href="https://rdrr.io/r/base/attr.html">attr(charlson, "regexprs")</a></code>) specify different versions of group identification based on regular expressions (see <code><a href="../reference/charlson.html">?charlson</a></code> for details). Those regular expressions only identifies individual codes but this can be controlled further by arguments <code>start</code> and <code>stop</code> to <code>set_classcodes</code>.</li>
<li>Columns with names prefixed by <code>index_</code> (also found by <code><a href="https://rdrr.io/r/base/attr.html">attr(charlson, "indices")</a></code>) are numeric variables used as weights when calculating index sums based on all (or a subset of) individual groups.</li>
<li>Other classcodes objects might have an additional column “condition” for conditional classification (see for example <code><a href="../reference/ae.html">?hip_ae</a></code>).</li>
</ul>
</div>
<div id="hierarchy" class="section level1">
<h1 class="hasAnchor">
<a href="#hierarchy" class="anchor"></a>Hierarchy</h1>
<p>Some classcodes objects (see for example <code><a href="../reference/elixhauser.html">?elixhauser</a></code>) might have an additional class attribute “hierarchy”, controlling hierarchical groups where only one of possibly several groups (occurring simultaneity) should be recognized for calculation of a weighted index sum.</p>
</div>
<div id="interpret-the-regular-expressions" class="section level1">
<h1 class="hasAnchor">
<a href="#interpret-the-regular-expressions" class="anchor"></a>Interpret the regular expressions</h1>
<div id="visualise-graphically" class="section level2">
<h2 class="hasAnchor">
<a href="#visualise-graphically" class="anchor"></a>Visualise graphically</h2>
<p>Regular expressions might be difficult to interpret but can be visualized by <code><a href="../reference/visualize.html">visualize()</a></code>. This will usually display a web page in the default browser (here suppressed by <code>show = FALSE</code>):</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">url</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/visualize.html">visualize</a></span>(<span class="no">charlson</span>, <span class="kw">show</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">regex</span> <span class="kw">=</span> <span class="st">"regex_icd10"</span>)</pre></body></html></div>
<p>Here, we can open the <code>url</code> “manually” by a link to the <a href="https://jex.im/regulex/#!embed=true&amp;flags=&amp;re=%5E(I2(%5B12%5D%7C52))%7C%5E(I(099%7C1(10%7C3%5B02%5D)%7C255%7C4(2%5B05-9%5D%7C3)%7C50)%7CP290)%7C%5E(I7(%5B01%5D%7C3%5B189%5D%7C71%7C9%5B02%5D)%7CK55%5B189%5D%7CZ95%5B89%5D)%7C%5E(G4%5B56%5D%7CH340%7CI6)%7C%5E(F0(%5B0-3%5D%7C51)%7CG3(0%7C11))%7C%5E((I27%5B89%5D)%7CJ(4%5B0-7%5D%7C6(%5B0-7%5D%7C84)%7C70%5B13%5D))%7C%5E(M(0%5B56%5D%7C3(15%7C%5B2-4%5D%7C5%5B13%5D%7C60)))%7C%5E(K2%5B5-8%5D)%7C%5E(B18%7CK7(0%5B0-39%5D%7C1%5B3457%5D%7C%5B34%5D%7C6%5B023489%5D)%7CZ944)%7C%5E(E1%5B0-4%5D%5B01689%5D)%7C%5E(G(041%7C114%7C8(0%5B12%5D%7C%5B12%5D%7C3%5B0-49%5D)))%7C%5E(I1(20%7C31)%7CN(0(%5B35%5D%5B2-7%5D)%7C1%5B89%5D%7C250)%7CZ(49%5B012%5D%7C9(40%7C92)))%7C%5E(E1%5B0-4%5D%5B2-57%5D)%7C%5E(C(%5B01%5D%7C2%5B0-6%5D%7C3%5B0-47-9%5D%7C4%5B0135-9%5D%7C5%5B0-8%5D%7C6%7C7%5B0-6%5D%7C8%5B1-58%5D%7C9%5B0-7%5D))%7C%5E(I(8(5%5B09%5D%7C64)%7C982)%7CK7(04%7C%5B12%5D1%7C29%7C6%5B5-7%5D))%7C%5E(C(7%5B7-9%5D%7C80))%7C%5E(B2%5B0124%5D)">JavaScript Regular Expression Parser &amp; Visualizer</a>. The displayed visualization is rather complex, however, wherefore a further simplification might be needed before actual understanding of the concept. We can chose to inspect the regular expression for myocardial infarction as codified by <code>regex_icd9cm_deyo</code>:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/visualize.html">visualize</a></span>(
  <span class="no">charlson</span>,
  <span class="kw">group</span>    <span class="kw">=</span> <span class="st">"myocardial infarction"</span>,
  <span class="kw">show</span>     <span class="kw">=</span> <span class="fl">FALSE</span>,
  <span class="kw">regex</span>    <span class="kw">=</span> <span class="st">"regex_icd9cm_deyo"</span>
)</pre></body></html></div>
<p><img src="regexp_charlson_ci_icd9.png" width="188"></p>
<p>Here <code><a href="https://rdrr.io/r/base/Arithmetic.html">^</a></code> indicates the beginning of the character string, followed by a literal <code>41</code> and either a <code>0</code> or <code>2</code>. The corresponding code according to ICD-is:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/visualize.html">visualize</a></span>(
  <span class="no">charlson</span>,
  <span class="kw">group</span>    <span class="kw">=</span> <span class="st">"myocardial infarction"</span>,
  <span class="kw">show</span>     <span class="kw">=</span> <span class="fl">FALSE</span>,
  <span class="kw">regex</span>    <span class="kw">=</span> <span class="st">"regex_icd10"</span>
)</pre></body></html></div>
<p><img src="regexp_charlson_ci_icd10.png" width="233"></p>
<p>Such code starts with <code>I2</code> followed by either <code>1</code>, <code>2</code> or <code>52</code> and where <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> indicates a logical “or” within the parenthesis (as used for expressions longer than single characters).</p>
</div>
<div id="list-all-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#list-all-codes" class="anchor"></a>List all codes</h2>
<p>An alternative representation is to list all relevant codes identified by each regular expression. This is implemented by the <code>summary</code> method for classcodes objects. (We here use the print method with <code>n = 30</code> to fit the output to the width of the vignette.)</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">charlson</span>, <span class="kw">coding</span> <span class="kw">=</span> <span class="st">"icd10cm"</span>),
  <span class="kw">n</span> <span class="kw">=</span> <span class="fl">30</span>
)
<span class="co">#&gt; Classification based on: regex_icd10</span>
<span class="co">#&gt; Indices: index_charlson, index_deyo_ramano, index_dhoore, index_ghali, index_quan_original, index_quan_updated </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Recognized codes per group:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  group                            n   codes                             </span>
<span class="co">#&gt;  AIDS/HIV                           1 B20                               </span>
<span class="co">#&gt;  cerebrovascular disease          430 G450, G451, G452, G453, G454,  ...</span>
<span class="co">#&gt;  chronic pulmonary disease         69 I2781, I2782, I2783, I2789, I2 ...</span>
<span class="co">#&gt;  congestive heart failure          36 I099, I110, I130, I132, I255,  ...</span>
<span class="co">#&gt;  dementia                          11 F0150, F0151, F0280, F0281, F0 ...</span>
<span class="co">#&gt;  diabetes complication            204 E1021, E1022, E1029, E10311, E ...</span>
<span class="co">#&gt;  diabetes without complication     52 E1010, E1011, E10610, E10618,  ...</span>
<span class="co">#&gt;  hemiplegia or paraplegia          45 G041, G114, G801, G802, G8100, ...</span>
<span class="co">#&gt;  malignancy                       961 C000, C001, C002, C003, C004,  ...</span>
<span class="co">#&gt;  metastatic solid tumor            47 C770, C771, C772, C773, C774,  ...</span>
<span class="co">#&gt;  mild liver disease                38 B180, B181, B182, B188, B189,  ...</span>
<span class="co">#&gt;  moderate or severe liver disease  14 I8500, I8501, I864, K7040, K70 ...</span>
<span class="co">#&gt;  myocardial infarction             18 I2101, I2102, I2109, I2111, I2 ...</span>
<span class="co">#&gt;  peptic ulcer disease              36 K250, K251, K252, K253, K254,  ...</span>
<span class="co">#&gt;  peripheral vascular disease      274 I700, I701, I70201, I70202, I7 ...</span>
<span class="co">#&gt;  renal disease                     28 I120, I1310, I1311, N032, N033 ...</span>
<span class="co">#&gt;  rheumatic disease                348 M0500, M05011, M05012, M05019, ...</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Use function visualize() for a graphical representation.</span></pre></body></html></div>
</div>
<div id="interpratable-codebook" class="section level2">
<h2 class="hasAnchor">
<a href="#interpratable-codebook" class="anchor"></a>Interpratable codebook</h2>
<p>Even with individual codes summarized, those might still be hard to interpret on their own. The <a href="https://cancercentrum.bitbucket.io/decoder/">decoder</a> package can help to translate codes to readable names/description. This is facilitated by the <code>codebook</code> function. The main purpose of the function is to export an Excel-file (if path specified by argument <code>file</code>). The output is otherwise a list, including both a summary table (described above) and a data frame “all_codes”:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="../reference/codebook.html">codebook</a></span>(<span class="no">charlson</span>, <span class="st">"icd10cm"</span>)$<span class="no">all_codes</span>)
)
<span class="co">#&gt; Classification based on: regex_icd10</span></pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">code</th>
<th align="left">description</th>
<th align="left">group</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">B180</td>
<td align="left">Chronic viral hepatitis B with delta-agent</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="even">
<td align="left">B181</td>
<td align="left">Chronic viral hepatitis B without delta-agent</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="odd">
<td align="left">B182</td>
<td align="left">Chronic viral hepatitis C</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="even">
<td align="left">B188</td>
<td align="left">Other chronic viral hepatitis</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="odd">
<td align="left">B189</td>
<td align="left">Chronic viral hepatitis, unspecified</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="even">
<td align="left">B20</td>
<td align="left">Human immunodeficiency virus [HIV] disease</td>
<td align="left">AIDS/HIV</td>
</tr>
</tbody>
</table>
<p>Here, the descriptions are based on the ICD-10-CM codes from 2020. Corresponding descriptions in Swedish are retrieved by (<code>icd10se</code> instead of <code>icd10cm</code>):</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="../reference/codebook.html">codebook</a></span>(<span class="no">charlson</span>, <span class="st">"icd10se"</span>)$<span class="no">all_codes</span>)
)
<span class="co">#&gt; Classification based on: regex_icd10</span></pre></body></html></div>
<table class="table">
<colgroup>
<col width="5%">
<col width="76%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th align="left">code</th>
<th align="left">description</th>
<th align="left">group</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">B180</td>
<td align="left">Kronisk (virus)hepatit B med hepatit D (coinfection)</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="even">
<td align="left">B180A</td>
<td align="left">Kronisk hepatit B med hepatit D (coinfection), normal lever</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="odd">
<td align="left">B180B</td>
<td align="left">Kronisk hepatit B med hepatit D (coinfection), ospecifik reaktiv hepatit</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="even">
<td align="left">B180C</td>
<td align="left">Kronisk hepatit B med hepatit D (coinfection), kronisk persisterande hepatit (KPH)</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="odd">
<td align="left">B180D</td>
<td align="left">Kronisk hepatit B med hepatit D (coinfection), kronisk aktiv hepatit (KAH)</td>
<td align="left">mild liver disease</td>
</tr>
<tr class="even">
<td align="left">B180E</td>
<td align="left">Kronisk hepatit B med hepatit D (coinfection), kronisk aktiv hepatit med cirros</td>
<td align="left">mild liver disease</td>
</tr>
</tbody>
</table>
</div>
<div id="combined-codebooks" class="section level2">
<h2 class="hasAnchor">
<a href="#combined-codebooks" class="anchor"></a>Combined codebooks</h2>
<p>Several codebooks can be combined (exported to a single Excel-file) by the function <code>codebooks</code> (note the plural s).</p>
</div>
</div>
<div id="alternative-classifications" class="section level1">
<h1 class="hasAnchor">
<a href="#alternative-classifications" class="anchor"></a>Alternative classifications</h1>
<p>Examples above use the default regex column (currently ICD-10). If we are interested in another version, for example specified by Deyo et al based on ICD-9-CM, this can be specified by the <code>regex</code>-argument passed by the <code>cc_args</code> argument to the <code>set_classcodes</code> function. Simultaneously, the <code>coding</code> argument is set to <code>icd9cmd</code> to match the regular expressions to the disease part of ICD-9-CM classifikcation.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(
    <span class="no">charlson</span>, <span class="kw">coding</span> <span class="kw">=</span> <span class="st">"icd9cmd"</span>,
    <span class="kw">cc_args</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">regex</span> <span class="kw">=</span> <span class="st">"regex_icd9cm_deyo"</span>)
  ),
  <span class="kw">n</span> <span class="kw">=</span> <span class="fl">30</span>
)
<span class="co">#&gt; Indices: index_charlson, index_deyo_ramano, index_dhoore, index_ghali, index_quan_original, index_quan_updated </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Recognized codes per group:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  group                            n   codes                             </span>
<span class="co">#&gt;  AIDS/HIV                           1 042                               </span>
<span class="co">#&gt;  cerebrovascular disease           69 430, 431, 4320, 4321, 4329, 43 ...</span>
<span class="co">#&gt;  chronic pulmonary disease          8 490, 500, 501, 502, 503, 504,  ...</span>
<span class="co">#&gt;  congestive heart failure          15 4280, 4281, 42820, 42821, 4282 ...</span>
<span class="co">#&gt;  dementia                          14 2900, 29010, 29011, 29012, 290 ...</span>
<span class="co">#&gt;  diabetes complication             12 25040, 25041, 25042, 25043, 25 ...</span>
<span class="co">#&gt;  diabetes without complication     20 25000, 25001, 25002, 25003, 25 ...</span>
<span class="co">#&gt;  hemiplegia or paraplegia          13 34200, 34201, 34202, 34210, 34 ...</span>
<span class="co">#&gt;  malignancy                       628 1400, 1401, 1403, 1404, 1405,  ...</span>
<span class="co">#&gt;  metastatic solid tumor            30 1960, 1961, 1962, 1963, 1965,  ...</span>
<span class="co">#&gt;  mild liver disease                 7 5712, 57140, 57141, 57142, 571 ...</span>
<span class="co">#&gt;  moderate or severe liver disease   6 4560, 4561, 5722, 5723, 5724,  ...</span>
<span class="co">#&gt;  myocardial infarction             31 41000, 41001, 41002, 41010, 41 ...</span>
<span class="co">#&gt;  peptic ulcer disease              72 53100, 53101, 53110, 53111, 53 ...</span>
<span class="co">#&gt;  peripheral vascular disease       15 44100, 44101, 44102, 44103, 44 ...</span>
<span class="co">#&gt;  renal disease                     26 5820, 5821, 5822, 5824, 58281, ...</span>
<span class="co">#&gt;  rheumatic disease                  8 7100, 7101, 7104, 7140, 7141,  ...</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Use function visualize() for a graphical representation.</span></pre></body></html></div>
</div>
<div id="set-clascodes-objects" class="section level1">
<h1 class="hasAnchor">
<a href="#set-clascodes-objects" class="anchor"></a>Set clascodes objects</h1>
<p>Some functions do not use the classcodes object themselves, but a modified version passed through the <code>set_classcodes</code> function. This function can be called directly but is more often invoked by arguments passed by the <code>cc_args</code> argument used in other functions (as exemplified above).</p>
<p>We can modify the <code>charlson</code> classcodes object as follows:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">charlson_icd8</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="../reference/set_classcodes.html">set_classcodes</a></span>(
    <span class="st">"charlson"</span>,
    <span class="kw">regex</span> <span class="kw">=</span> <span class="st">"regex_icd8_brusselaers"</span>, <span class="co"># Version based on ICD-8</span>
    <span class="kw">start</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="co"># Codes do not have to occur in the beginning of a vector</span>
    <span class="kw">stop</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="co"># Code vector must end with the specified codes</span>
    <span class="kw">tech_names</span> <span class="kw">=</span> <span class="fl">TRUE</span> <span class="co"># Use long but unique and descriptive variable names</span>
  )</pre></body></html></div>
<p>The resulting object has only one <code>regex</code>-column. It is based on “regex_icd8_brusselaers” but suffixed with <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> (due to <code>stop = TRUE</code>). Group names might seem cumbersome but this will help to distinguish column names added by <code>categorize</code> if this function is run repeatedly with different classcodes. The original <code>charlson</code> object had 17 rows, but <code>charlson_icd8</code> has only 13, since not all groups are defined by that version.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(
  <span class="no">charlson_icd8</span>[, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"group"</span>, <span class="st">"regex"</span>)]
)</pre></body></html></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="51%">
<col width="46%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">group</th>
<th align="left">regex</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">charlson_regex_icd8_brusselaers_myocardial_infarction</td>
<td align="left">(41[0-2])$</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">charlson_regex_icd8_brusselaers_congestive_heart_failure</td>
<td align="left">(4270|428)$</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">charlson_regex_icd8_brusselaers_peripheral_vascular_disease</td>
<td align="left">(44[0-5])$</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">charlson_regex_icd8_brusselaers_cerebrovascular_disease</td>
<td align="left">(43[0-8])$</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">charlson_regex_icd8_brusselaers_dementia</td>
<td align="left">(290[01])$</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="left">charlson_regex_icd8_brusselaers_chronic_pulmonary_disease</td>
<td align="left">(49[0-3]|51[5-8])$</td>
</tr>
<tr class="odd">
<td align="left">7</td>
<td align="left">charlson_regex_icd8_brusselaers_rheumatic_disease</td>
<td align="left">(7(1[0-2]|34))$</td>
</tr>
<tr class="even">
<td align="left">11</td>
<td align="left">charlson_regex_icd8_brusselaers_hemiplegia_or_paraplegia</td>
<td align="left">(344)$</td>
</tr>
<tr class="odd">
<td align="left">12</td>
<td align="left">charlson_regex_icd8_brusselaers_renal_disease</td>
<td align="left">(40[34]|58[0-3]|792)$</td>
</tr>
<tr class="even">
<td align="left">13</td>
<td align="left">charlson_regex_icd8_brusselaers_diabetes_complication</td>
<td align="left">(250)$</td>
</tr>
<tr class="odd">
<td align="left">14</td>
<td align="left">charlson_regex_icd8_brusselaers_malignancy</td>
<td align="left">(1([4-68][0-9]|7[0-24-9]|9[0-4])|20[0-7])$</td>
</tr>
<tr class="even">
<td align="left">15</td>
<td align="left">charlson_regex_icd8_brusselaers_moderate_or_severe_liver_disease</td>
<td align="left">(070|4560|51[1-3])$</td>
</tr>
<tr class="odd">
<td align="left">16</td>
<td align="left">charlson_regex_icd8_brusselaers_metastatic_solid_tumor</td>
<td align="left">(19[6-9])$</td>
</tr>
</tbody>
</table>
<p>Note that all indices columns remain (although not showed above):</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">charlson_icd8</span>)
<span class="co">#&gt; [1] "group"               "description"         "index_charlson"     </span>
<span class="co">#&gt; [4] "index_deyo_ramano"   "index_dhoore"        "index_ghali"        </span>
<span class="co">#&gt; [7] "index_quan_original" "index_quan_updated"  "regex"</span></pre></body></html></div>
<p>It is thus possible to combine any categorization with any index, although some combinations might be preferred (such as <code>regex_icd9cm_deyo</code> combined with <code>index_deyo_ramano</code>).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/eribul">Erik Bulow</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
